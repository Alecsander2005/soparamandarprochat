{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Template PMPB | {% block title %}{% endblock title %}</title>

  <!-- Google Font: Source Sans Pro -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href={% static "adminlte-3.1.0/plugins/fontawesome-free/css/all.min.css" %}>
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href={% static "adminlte-3.1.0/plugins/overlayScrollbars/css/OverlayScrollbars.min.css" %}>
  <!-- Theme style -->
  <link rel="stylesheet" href={% static "adminlte-3.1.0/css/adminlte.css" %}>

  <link rel="icon" type="image/x-icon" href={% static "sti/img/pmpb_32.png" %}>
  {% block style_sheet %}{% endblock %}
</head>

<body class="dark-mode sidebar-mini layout-fixed layout-navbar-fixed control-sidebar-slide-open">
  <div class="wrapper">

    <!-- Preloader -->
    <div class="preloader flex-column justify-content-center align-items-center">
      <img class="fade-box" src={% static "sti/img/pmpb_128.png" %} alt="PMPBLogo" height="120" width="120">
    </div>

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-dark">
      <!-- Left navbar links -->

      <!-- Right navbar links -->
      <ul class="navbar-nav ml-auto">
        <!-- Navbar Search -->
        <li class="nav-item">
          <a class="nav-link" data-widget="dark-mode" href="#" role="button" onclick="toggleDarkMode()">
            <i class="fas fa-adjust"></i>
          </a>
        <li class="nav-item">
          <a class="nav-link" data-widget="fullscreen" href="#" role="button">
            <i class="fas fa-expand-arrows-alt"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href={% url "logout" %} role="button">
            <i class="fas fa-sign-out-alt"></i>
          </a>
        </li>
      </ul>
    </nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">
      <!-- Brand Logo -->
      <a href={% url "index" %} class="brand-link">
        <img src={% static "sti/img/pmpb_128.png" %} alt="PMPB Logo" class="brand-image img-circle elevation-3"
          style="opacity: .8">
        <span class="brand-text font-weight-light">Template PMPB</span>
      </a>

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Sidebar user panel (optional) -->
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
          <div class="image">
            {% if user.image %}
            {% else %}
            <img src={% static "sti/img/sem-imagem.jpeg" %} class="img-square elevation-2" alt="User Image">
            {% endif %}
            
          </div>
          <div class="info">
            {% if user.first_name %}
            <a href="#" class="d-block">{{ user.first_name }} {{ user.last_name }}</a>
            {% else %}
            <a href="#" class="d-block">Usuário Demo</a>
            {% endif %}
            
          </div>
        </div>

        <!-- SidebarSearch Form -->
        <div class="form-inline">
          <div class="input-group" data-widget="sidebar-search">
            <input class="form-control form-control-sidebar" type="search" placeholder="Buscar" aria-label="Buscar">
            <div class="input-group-append">
              <button class="btn btn-sidebar">
                <i class="fas fa-search fa-fw"></i>
              </button>
            </div>
          </div>
        </div>

       {% include "sidebar.html" %} <!-- Importa a sidebar modularizada -->
        <!-- /.sidebar-menu -->
      </div>
      <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <div class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h1 class="m-0">{% block title-header %}{% endblock %}</h1>
            </div><!-- /.col -->
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-right">
                {% block breadcrumb %}{% endblock breadcrumb %}
              </ol>
            </div><!-- /.col -->
          </div><!-- /.row -->
        </div><!-- /.container-fluid -->
      </div>
      <!-- /.content-header -->

      <!-- Main content -->
      <section class="content">
        <div class="container-fluid">    
            {% block content %}{% endblock %}
        </div><!--/. container-fluid -->
      </section>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <!-- Main Footer -->
    <footer class="main-footer">
      <strong>Direitos Reservados &copy; 2024 <a href="https://www.pm.pb.gov.br/portal/">PMPB</a>.</strong>
      <div class="float-right d-none d-sm-inline-block">
        <b>Versão</b> 1.0-L
      </div>
    </footer>
  </div>
  <!-- ./wrapper -->

  <!-- REQUIRED SCRIPTS -->
  <!-- jQuery -->
  <script src={% static "adminlte-3.1.0/plugins/jquery/jquery.min.js" %}></script>
  <!-- Bootstrap -->
  <script src={% static "adminlte-3.1.0/plugins/bootstrap/js/bootstrap.bundle.min.js" %}></script>
  <!-- overlayScrollbars -->
  <script src={% static "adminlte-3.1.0/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js" %}></script>
  <!-- AdminLTE App -->
  <script src={% static "adminlte-3.1.0/js/adminlte.js" %}></script>

  <!-- PAGE PLUGINS -->
  <!-- jQuery Mapael -->
  <script src={% static "adminlte-3.1.0/plugins/jquery-mousewheel/jquery.mousewheel.js" %}></script>
  <script src={% static "adminlte-3.1.0/plugins/raphael/raphael.min.js" %}></script>
  <script src={% static "adminlte-3.1.0/plugins/jquery-mapael/jquery.mapael.min.js" %}></script>
  <script src={% static "adminlte-3.1.0/plugins/jquery-mapael/maps/usa_states.min.js" %}></script>
  <!-- ChartJS -->
  <script src={% static "adminlte-3.1.0/plugins/chart.js/Chart.min.js" %}></script>
  <!-- Custom Scripts -->

  <!-- Dark Mode Switch by Lucas M.-->
  <script>
    function toggleDarkMode() {
        // Get the body element
        var body = document.body;

        // Toggle the 'dark-mode' class on the body
        body.classList.toggle('dark-mode');

        // Save the current state to localStorage
        var isDarkMode = body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDarkMode);
    }

    // Load the dark mode state on page load
    window.onload = function() {
        var isDarkMode = localStorage.getItem('darkMode') === 'true';
        var body = document.body;
        if (isDarkMode) {
            body.classList.add('dark-mode');
        } else {
            body.classList.remove('dark-mode');
        }
    };
  </script>
  {% block js %}
  {% endblock %}
</body>

</html>